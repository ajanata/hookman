#summary Format of the AppVar which lists the active hook chains.
#labels Phase-Design,Phase-Implementation

This document describes the format of the active hook chain list application variable ("HMChains").

=Outline overview=

  # Signature.
  # Offset pointer table for every hook chain. $00 if no hooks defined for a given chain. Calculate location of head of chain as (varloc)+len(header)+(offset*len(chainnode))
  # Hook chains.


=Definitions=

Signature: "HMCL",chainlistversion (currently $00)

Offset pointer table: In hook ID number order (see hooklist.inc).

Hook chains: Consist of a string of hook nodes executed in order:

{{{
basepage - 1 byte - $FF if end of chain (rest of node is irrelevant)
hookpage - 1 byte - may be the same as basepage
hookaddr - 1 word - address of $83 byte in hook
appid - 1 byte - offset into (local!) application database, for recovering from deleted apps causing pages to shift. Currently unused and set to $00.
}}}

basepage is used to reference all(!) other hooks to re-load the proper information into the hook
